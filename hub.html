<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYRIX // COMMAND CENTER</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
</head>
<body class="dashboard-root" id="page-hub">

    <div id="hubLocked" class="auth-screen">
        <div class="auth-container">
            <div class="auth-header">
                <h1>SYRIX<span class="text-red">_NET</span></h1>
                <div class="status-indicator">SECURE CONNECTION REQUIRED</div>
            </div>

            <div id="login-module">
                <p class="auth-msg">IDENTIFY YOURSELF, OPERATOR.</p>
                <button class="btn-discord" onclick="window.loginDiscord()">
                    <i class="fa-brands fa-discord"></i> AUTHENTICATE VIA DISCORD
                </button>
                <button class="btn-ghost" onclick="window.location.href='index.html'">ABORT SESSION</button>
            </div>

            <div id="application-module" style="display:none;">
                <div class="form-header">
                    <h3><i class="fa-solid fa-file-contract"></i> ENLISTMENT DOSSIER</h3>
                    <p>Your ID is not recognized. Submit application for clearance.</p>
                </div>
                <div class="form-body">
                    <div class="input-group">
                        <label>RIOT ID</label>
                        <input type="text" id="app-ign" placeholder="Name#TAG">
                    </div>
                    <div class="row">
                        <div class="input-group">
                            <label>RANK</label>
                            <select id="app-rank">
                                <option>Ascendant 1</option>
                                <option>Ascendant 2</option>
                                <option>Ascendant 3</option>
                                <option>Immortal 1</option>
                                <option>Immortal 2</option>
                                <option>Immortal 3</option>
                                <option>Radiant</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>PRIMARY ROLE</label>
                            <select id="app-role">
                                <option>Duelist</option>
                                <option>Initiator</option>
                                <option>Controller</option>
                                <option>Sentinel</option>
                                <option>Flex</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>TRACKER.GG URL</label>
                        <input type="text" id="app-tracker" placeholder="https://tracker.gg/valorant/profile/...">
                    </div>
                    <div class="input-group">
                        <label>STATEMENT OF INTENT</label>
                        <textarea id="app-why" rows="3" placeholder="Why do you want to join Syrix?"></textarea>
                    </div>
                    <button class="btn-submit" onclick="window.submitApp()">TRANSMIT APPLICATION</button>
                </div>
            </div>
        </div>
    </div>

    <div id="hubUnlocked" class="hub-layout">

        <header class="hub-topbar">
            <div class="topbar-left">
                <div class="logo">SYRIX <span class="text-red">HUB</span></div>
                <div class="connection-status"><span class="dot"></span> ONLINE</div>
            </div>
            <div class="topbar-right">
                <div class="user-display">
                    <span class="role-badge" id="user-role-badge">OPERATOR</span>
                    <span id="user-name">UNKNOWN</span>
                </div>
                <select id="user-timezone" onchange="window.updateTimezone()">
                    <option value="UTC">UTC</option>
                    <option value="Europe/London">London</option>
                    <option value="Europe/Paris">Paris</option>
                    <option value="America/New_York">New York</option>
                </select>
                <button class="btn-icon" onclick="firebase.auth().signOut()"><i class="fa-solid fa-power-off"></i></button>
            </div>
        </header>

        <nav class="hub-nav">
            <div class="scroll-container">
                <button class="nav-item active" onclick="window.router('dashboard')">DASHBOARD</button>
                <button class="nav-item" onclick="window.router('matches')">OPERATIONS</button>
                <button class="nav-item" onclick="window.router('warroom')">WAR ROOM</button>
                <button class="nav-item" onclick="window.router('stratbook')">STRATBOOK</button>
                <button class="nav-item" onclick="window.router('lineups')">LINEUPS</button>
                <button class="nav-item" onclick="window.router('roster')">ROSTER</button>
                <button class="nav-item" onclick="window.router('comps')">COMPS</button>
                <button class="nav-item" onclick="window.router('mapveto')">VETO</button>
                <button class="nav-item admin-only" id="nav-admin" onclick="window.router('admin')" style="display:none; border-color:var(--red);">ADMIN</button>
            </div>
        </nav>

        <main id="main-view">

            <div id="view-dashboard" class="view-section active">
                <div class="dashboard-grid">
                    <div class="col-left">
                        <div class="card message-card">
                            <div class="card-head">
                                <h3><i class="fa-solid fa-bullhorn"></i> CAPTAIN'S MESSAGE</h3>
                                <button class="btn-text" onclick="window.toggleEditMsg()">EDIT</button>
                            </div>
                            <div class="message-content" id="dashboard-msg">Initializing...</div>
                            <div id="msg-editor" style="display:none;">
                                <textarea id="msg-input" class="dash-input"></textarea>
                                <button class="btn-sm" onclick="window.saveMsg()">POST</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-head"><h3><i class="fa-solid fa-calendar-xmark"></i> ABSENCE LOG</h3></div>
                            <div class="form-mini">
                                <div class="row">
                                    <input type="date" id="abs-start" class="dash-input">
                                    <input type="date" id="abs-end" class="dash-input">
                                </div>
                                <input type="text" id="abs-reason" class="dash-input" placeholder="Reason">
                                <button class="btn-block" onclick="window.logAbsence()">LOG ABSENCE</button>
                            </div>
                            <div id="dashboard-absences" class="list-mini"></div>
                        </div>
                    </div>

                    <div class="col-mid">
                        <div class="card full-height">
                            <div class="card-head">
                                <h3>UPCOMING OPERATIONS</h3>
                                <span class="badge" id="ops-count">0 ACTIVE</span>
                            </div>
                            <div id="dashboard-events" class="event-list">Loading...</div>
                        </div>
                    </div>

                    <div class="col-right">
                        <div class="stat-card">
                            <small>WIN RATE</small>
                            <div id="dash-winrate" class="big-num">--%</div>
                        </div>
                        <div class="stat-card">
                            <small>CURRENT STREAK</small>
                            <div class="big-num text-green">W2</div>
                        </div>
                        <div class="stat-card">
                            <small>NEXT MAP</small>
                            <div class="big-text">ASCENT</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-stratbook" class="view-section">
                <div class="strat-layout">
                    <div class="canvas-container">
                        <canvas id="vpCanvas"></canvas>
                        <img id="vpMapImg" src="">
                        <div class="canvas-ui">
                            <div class="toolbar">
                                <button onclick="window.tool='draw'" class="tool-btn active" title="Draw"><i class="fa-solid fa-pen"></i></button>
                                <button onclick="window.tool='agent'" class="tool-btn" title="Place Agent"><i class="fa-solid fa-user"></i></button>
                                <input type="color" id="vpColor" value="#ff1e3c">
                                <div class="sep"></div>
                                <button onclick="window.saveStrat()" class="tool-btn save"><i class="fa-solid fa-floppy-disk"></i></button>
                                <button onclick="window.clearStrat()" class="tool-btn danger"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="strat-sidebar">
                        <div class="card">
                            <label>THEATER</label>
                            <select id="vpMapSelect" class="dash-select" onchange="window.changeMap()">
                                <option value="ascent">ASCENT</option>
                                <option value="bind">BIND</option>
                                <option value="haven">HAVEN</option>
                                <option value="lotus">LOTUS</option>
                                <option value="pearl">PEARL</option>
                                <option value="split">SPLIT</option>
                                <option value="sunset">SUNSET</option>
                                <option value="abyss">ABYSS</option>
                            </select>
                        </div>
                        <div class="card fill">
                            <label>ASSETS</label>
                            <div id="agent-palette" class="asset-grid"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-matches" class="view-section">
                <div class="split-panel">
                    <div class="panel-left">
                        <div class="card">
                            <h3>LOG OPERATION</h3>
                            <div class="form-group">
                                <input id="m-opp" class="dash-input" placeholder="Opponent Name">
                                <div class="row">
                                    <input type="number" id="m-us" class="dash-input" placeholder="Us">
                                    <input type="number" id="m-them" class="dash-input" placeholder="Them">
                                </div>
                                <input type="date" id="m-date" class="dash-input">
                                <input type="time" id="m-time" class="dash-input">
                                <select id="m-map" class="dash-input">
                                    <option>Ascent</option>
                                    <option>Bind</option>
                                    <option>Haven</option>
                                    <option>Lotus</option>
                                    <option>Pearl</option>
                                    <option>Split</option>
                                    <option>Sunset</option>
                                    <option>Abyss</option>
                                </select>
                                <select id="m-type" class="dash-input">
                                    <option>Scrim</option>
                                    <option>Tournament</option>
                                    <option>Premier</option>
                                    <option>VOD Review</option>
                                </select>
                                <button class="btn-block primary" onclick="window.addMatch()">ADD RECORD</button>
                            </div>
                        </div>
                    </div>
                    <div class="panel-right">
                        <div class="card full-height">
                            <h3>OPERATIONAL HISTORY</h3>
                            <div id="match-list" class="scroll-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-warroom" class="view-section">
                <div class="split-panel">
                    <div class="panel-left">
                        <div class="card full-height">
                            <h3>TARGET LIST</h3>
                            <button class="btn-block ghost" onclick="window.createEnemy()">+ NEW TARGET</button>
                            <div id="enemy-list" class="scroll-list"></div>
                        </div>
                    </div>
                    <div class="panel-right">
                        <div class="card full-height">
                            <h3 id="wr-title">SELECT TARGET</h3>
                            <div id="wr-content" style="display:none; height:100%; display:flex; flex-direction:column;">
                                <div class="tab-bar">
                                    <button class="sub-tab active">General Notes</button>
                                </div>
                                <textarea id="wr-notes" class="dash-textarea" placeholder="Enter tactical notes, tendencies, and comps..."></textarea>
                                <div class="action-bar">
                                    <button class="btn-sm primary" onclick="window.saveIntel()">UPDATE INTEL</button>
                                    <button class="btn-sm danger" onclick="window.deleteEnemy()">BURN FILE</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-admin" class="view-section">
                <div class="card">
                    <h3>PENDING ENLISTMENTS</h3>
                    <div id="admin-list" class="grid-list"></div>
                </div>
            </div>

            <div id="view-roster" class="view-section">
                <div class="dashboard-grid">
                    <div class="card col-left">
                        <h3>MEMBERS</h3>
                        <div id="roster-list-mgr" class="scroll-list"></div>
                    </div>
                    <div class="card col-mid">
                        <h3>EDIT PROFILE</h3>
                        <div id="roster-editor" style="display:none;">
                            <input id="r-id" class="dash-input" disabled>
                            <select id="r-role" class="dash-input"><option>Captain</option><option>Main</option><option>Sub</option><option>Coach</option></select>
                            <input id="r-pfp" class="dash-input" placeholder="Image URL">
                            <button class="btn-block primary" onclick="window.saveProfile()">SAVE</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-comps" class="view-section">
                <div class="card">
                    <h3>TEAM COMPOSITIONS (WIP)</h3>
                    <p>Agent selector module logic placeholder.</p>
                </div>
            </div>

            <div id="view-lineups" class="view-section">
                <div class="card">
                    <h3>LINEUP LIBRARY</h3>
                    <div class="grid-gallery" id="lineup-grid"></div>
                </div>
            </div>

            <div id="view-mapveto" class="view-section">
                <div class="card">
                    <h3>MAP VETO <button class="btn-text" onclick="window.resetVeto()">RESET</button></h3>
                    <div id="veto-grid" class="veto-container"></div>
                </div>
            </div>

        </main>
    </div>

    <div id="modal-overlay" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3 id="modal-title">TITLE</h3>
            <div id="modal-body"></div>
            <button class="btn-block" onclick="document.getElementById('modal-overlay').style.display='none'">CLOSE</button>
        </div>
    </div>

    <script src="assets/js/script.js"></script>
</body>
</html>